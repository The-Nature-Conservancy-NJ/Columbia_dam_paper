"0","site_to_plot <- ""TNC_23""  "
"0",""
"0","color_vector_df <- data.frame(order = 1:10,"
"0","                              col = c(wes_palettes$Zissou1, "
"0","                                      wes_palettes$Royal2))"
"0",""
"0","# Subset the data for the plot (only Spawning, Larvae, Juvenile)"
"0","plot_data <- tsum_season_exclude %>%"
"0","  filter(site == site_to_plot,"
"0","         !is.na(season),"
"0","         n > 10,"
"0","         season %in% c(""spawn"", ""larvae"", ""juvenile"")) %>%"
"0","  left_join(color_vector_df, by = ""order"")"
"0",""
"0","# Get the max year of the data for that site"
"0","max_y <- max(as.numeric(as.character(plot_data$yearf)))"
"0",""
"0","# Define seasons and annotations (only 3 stages)"
"0","seas2_vector <- rep(c(""Spawn"", ""Larvae"", ""Juvenile""), 4)"
"0","ann_vector <- rep(c(""Spawning (16-31 May)\nOptimal egg dev.: 17 째C"","
"0","                    ""Larvae (1-30 June)\nRequire: 16-26 째C"","
"0","                    ""Juvenile (1 July - 15 Sept.)\nRequire: 16-26 째C""), 4)"
"0",""
"0","# Create annotation dataframe"
"0","annotate_df <- data.frame(yearf = as.factor(rep(max_y, 3)),"
"0","                          mean_mean = 6,"
"0","                          season2 = as.factor(seas2_vector[1:3]),"
"0","                          ann = ann_vector[1:3]) %>%"
"0","  mutate(order = case_when(season2 == ""Spawn"" ~ 1,"
"0","                           season2 == ""Larvae"" ~ 2,"
"0","                           season2 == ""Juvenile"" ~ 3),"
"0","         season2 = fct_reorder(season2, order)) %>%"
"0","  left_join(color_vector_df, by = ""order"")"
"0",""
"0","# Plot"
"0","tnc_23_mig_temp <- ggplot("
"0","  plot_data %>%"
"0","    filter(as.numeric(as.character(yearf)) >= 2016 & as.numeric(as.character(yearf)) <= 2024)  # Subset years"
"0",") +"
"0","  geom_errorbar(aes(y = yearf, xmin = mean_min, xmax = mean_max), width = 0) +"
"0","  geom_point(aes(y = yearf, x = mean_mean, color = season2), size = 3) +"
"0","  geom_text(aes(y = yearf, x = mean_mean, label = ann), data = annotate_df, size = 3,"
"0","            hjust = .05, vjust = 1.2) +"
"0","  facet_grid(season2 ~ .) +"
"0","  theme_bw() +"
"0","  labs(x = ""Mean daily temperature \n(째C, +/- average min and max)"", y = """", color = """") +"
"0","  scale_x_continuous(limits = c(6, 27), breaks = seq(6, 26, by = 4)) +"
"0","  scale_y_discrete(breaks = seq(2016, 2024, by = 2)) +  # Show every other year"
"0","  scale_color_manual(values = c(""Spawn"" = 'grey70', 'Larvae' = 'grey40', 'Juvenile' = 'grey20')) +"
"0","  theme(text = element_text(size = 14),"
"0","        axis.title.y = element_text(size = 12),"
"0","        axis.text.y = element_text(size = 10),"
"0","        strip.text = element_blank(),"
"0","        strip.background = element_blank(),"
"0","        legend.position = ""right"","
"0","        panel.grid.major = element_blank(),"
"0","        panel.grid.minor = element_blank(),"
"0","        panel.border = element_rect(color = 'black', fill = NA)) +"
"0","  guides(color = ""none"")"
"0",""
"0",""
"0","site_to_plot_do <- ""TNC_23""  "
"0",""
"0",""
"0","color_vector_df <- data.frame(order = 1:10,"
"0","                              col = c(wes_palettes$Zissou1, "
"0","                                      wes_palettes$Royal2))"
"0",""
"0","# Subset the data for the plot (only Spawn, Larvae, Juvenile)"
"0","plot_data_do <- dosum_season_exclude %>%"
"0","  filter(site == site_to_plot_do,"
"0","         !is.na(season),"
"0","         n > 10,"
"0","         season %in% c(""spawn"", ""larvae"", ""juvenile"")) %>%"
"0","  left_join(color_vector_df, by = ""order"")"
"0",""
"0","# Get the max year of the data for that site"
"0","max_y <- max(as.numeric(as.character(plot_data_do$yearf)))"
"0",""
"0","# Define seasons and annotations (only 3 stages)"
"0","seas2_vector_do <- rep(c(""Spawn"", ""Larvae"", ""Juvenile""), 4)"
"0","ann_vector_do <- rep(c(""Spawning (16-31 May)\nRequire: > 5 mg/L"","
"0","                       ""Larvae (1-30 June)\nRequire: > 5 mg/L"","
"0","                       ""Juvenile (1 July - 15 Sept.)\nRequire: > 5 mg/L""), 4)"
"0",""
"0","# Create annotation dataframe"
"0","annotate_df_do <- data.frame(yearf = as.factor(rep(max_y, 3)),"
"0","                             mean_mean = 6,"
"0","                             season2 = as.factor(seas2_vector_do[1:3]),"
"0","                             ann = ann_vector_do[1:3]) %>%"
"0","  mutate(order = case_when(season2 == ""Spawn"" ~ 1,"
"0","                           season2 == ""Larvae"" ~ 2,"
"0","                           season2 == ""Juvenile"" ~ 3),"
"0","         season2 = fct_reorder(season2, order)) %>%"
"0","  left_join(color_vector_df, by = ""order"")"
"0",""
"0","# Plot"
"0","tnc_23_mig_do <- "
"0","ggplot("
"0","  plot_data_do %>%"
"0","    filter(as.numeric(as.character(yearf)) >= 2016 & as.numeric(as.character(yearf)) <= 2024)  # Subset years"
"0",") +"
"0","  geom_errorbar(aes(y = yearf, xmin = mean_min, xmax = mean_max), width = 0) +"
"0","  geom_point(aes(y = yearf, x = mean_mean, color = season2), size = 3) +"
"0","  geom_text(aes(y = yearf, x = 0, label = ann), data = annotate_df_do, size = 3,"
"0","            hjust = 0.05, vjust = 1.2) +"
"0","  facet_grid(season2 ~ .) +"
"0","  theme_bw() +"
"0","  labs(x = ""Mean daily dissolved oxygen\n(mg/L, +/- average min and max)"", y = """", color = """") +"
"0","  scale_x_continuous(limits = c(0, 14), breaks = seq(0, 14, by = 2)) +"
"0","  scale_y_discrete(breaks = as.character(seq(2016, 2024, by = 2))) +  # Show every other year"
"0","  scale_color_manual(values = c(""Spawn"" = 'grey70', 'Larvae' = 'grey40', 'Juvenile' = 'grey20')) +"
"0","  theme(text = element_text(size = 14),"
"0","        axis.title.y = element_text(size = 12),"
"0","        axis.text.y = element_text(size = 10),"
"0","        strip.text = element_blank(),"
"0","        strip.background = element_blank(),"
"0","        legend.position = ""right"","
"0","        panel.grid.major = element_blank(),"
"0","        panel.grid.minor = element_blank(),"
"0","        panel.border = element_rect(color = 'black', fill = NA)) +"
"0","  guides(color = ""none"")"
"0",""
"0",""
"0","ggarrange(tnc_23_mig_temp, tnc_23_mig_do,"
"0","                         ncol = 1, nrow = 2,"
"0","                         labels = c(""A"", ""B""))"
